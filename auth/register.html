<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MD4</title>
<!--    <link rel="stylesheet" href="style.css">-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="../fragment/include.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</head>
<body>
<section class="vh-100 bg-image"
         style="color: #b44593">
    <div class="mask d-flex align-items-center h-100 gradient-custom-3">
        <div class="container h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                    <div class="card" style="border-radius: 15px;">
                        <div class="card-body p-5">
                            <h2 class="text-uppercase text-center mb-5">Create an account</h2>

                            <form>
                                <label id="validate" style="color: red" class="form-label"></label>
                                <div class="form-outline mb-4">
                                    <input oninput="validate()" type="text" id="name"
                                           class="form-control form-control-lg"/>
                                    <label id="validate_name" class="form-label">Your Name</label>
                                </div>

                                <div class="form-outline mb-4">
                                    <input oninput="validate()" type="text" id="username" class="form-control form-control-lg"/>
                                    <label id="validate_username" class="form-label">Username</label>
                                </div>
                                <div class="form-outline mb-4">
                                    <input oninput="validate()" type="email" id="email"
                                           class="form-control form-control-lg"/>
                                    <label id="validate_email" class="form-label">Email</label>
                                </div>
                                <div class="form-outline mb-4">
                                    <input oninput="validate()" type="password" id="password" class="form-control form-control-lg"/>
                                    <label id="validate_password" class="form-label">Password</label>
                                </div>

                                <div class="form-outline mb-4">
                                    <input oninput="validate()" type="password" id="repeat_pass" class="form-control form-control-lg"/>
                                    <label style="color: red" id="validate_repeat" class="form-label" >Repeat your password</label>
                                </div>



                                <div class="d-flex justify-content-center">
                                    <button id="btn-register" type="button" class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">Register</button>
                                </div>
                                <div>
                                    <button><a href="/auth/login.html">login</a></button>
                                   <button><a href="/index.html">HOME</a></button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    let email;

    function validateEmail() {
        email = document.getElementById('email').value;
        console.log('goi ham validate')
        if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
            return (true)
        }
        return (false)
    }

    function validate() {
        let name = document.getElementById('name').value;
        email = document.getElementById('email').value;
        console.log('leng -->', name.length)
        if (name.trim() === '') {
            document.getElementById('validate_name').innerHTML = '<label style="color: red">The name is required!</label>'
            return
        } else if (name.length < 3 || name.length > 50) {
            document.getElementById('validate_name').innerHTML = '<label style="color: red">The name is more less than 2 character or is more than 6 character</label>'
            return;
        } else {
            document.getElementById('validate_name').innerHTML = ''
        }
        let username = document.getElementById('username').value;
        if (username.trim() === '') {
            document.getElementById('validate_username').innerHTML = '<label style="color: red">The username is required!</label>'
            return
        } else if (username.length < 3 || name.length > 50) {
            document.getElementById('validate_username').innerHTML = '<label style="color: red">The username is more less than 2 character or is more than 6 character</label>'
            return;
        } else {
            document.getElementById('validate_username').innerHTML = ''
        }
        console.log('email ===> ', email)
        if (email === '') {
            document.getElementById('validate_email').innerHTML = '<label style="color: red">The email is required!</label>'
            return;
        } else if (!validateEmail()) {
            console.log('check --->', validateEmail())
            console.log('vao day khong nhe')
            document.getElementById('validate_email').innerHTML = '<label style="color: red">The email is invalid!</label>'
            return;
        } else {
            document.getElementById('validate_email').innerHTML = ''
        }
        let password = document.getElementById('password').value;
        if (password.trim() === '') {
            document.getElementById('validate_password').innerHTML = '<label style="color: red">The password is required!</label>'
            return
        } else if (password.length < 3 || password.length > 100) {
            document.getElementById('validate_password').innerHTML = '<label style="color: red">The password is more less than 2 character or is more than 6 character</label>'
            return;
        } else {
            document.getElementById('validate_password').innerHTML = ''
        }
        let repeat_pass = document.getElementById('repeat_pass').value;
        if(repeat_pass!==password){
            document.getElementById('validate_repeat').innerHTML = 'The password is not match!'
        } else {
            document.getElementById('validate_repeat').innerHTML = ''
        }
    }

    $(document).ready(function () {
        let signUpForm = {};
        validate();
        $('#btn-register').click(function () {
            signUpForm.name = $('#name').val();
            signUpForm.username = $('#username').val();
            signUpForm.email = $('#email').val();
            signUpForm.password = $('#password').val();
            signUpForm.roles = ["admin"];
            let signUpFormOBJ = JSON.stringify(signUpForm);
            console.log('data truoc --> ', signUpFormOBJ)
            $.ajax({
                async: false,
                url: 'http://localhost:8080/api/auth/signup',
                data: signUpFormOBJ,
                contentType: 'application/json; charset=UTF8',
                method: 'POST',
                success: function (data) {
                    console.log('data sau--> ', data)
                    if (data.message === 'nouser') {
                        document.getElementById('validate').innerHTML = 'The username is existed! Please try again!'
                    } else if (data.message === 'noemail') {
                        document.getElementById('validate').innerHTML = 'The email is existed! Please try again!'
                    } else if (data.message === 'yes') {
                        document.getElementById('validate').innerHTML = 'Create success!'
                    }
                    alert('register success')
                }
            })
        })
    })
</script>

<!--<section class="h-100 h-custom" style="background-color: #8fc4b7;">-->
<!--    <div class="container py-5 h-100">-->
<!--        <div class="row d-flex justify-content-center align-items-center h-100">-->
<!--            <div class="col-lg-8 col-xl-6">-->
<!--                <div class="card rounded-3">-->
<!--                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/img3.webp"-->
<!--                         class="w-100" style="border-top-left-radius: .3rem; border-top-right-radius: .3rem;"-->
<!--                         alt="Sample photo">-->
<!--                    <div class="card-body p-4 p-md-5">-->
<!--                        <h3 class="mb-4 pb-2 pb-md-0 mb-md-5 px-md-2">Registration Info</h3>-->

<!--                        <form class="px-md-2">-->

<!--                            <div class="form-outline mb-4">-->
<!--                                <input type="text" id="names" class="form-control" />-->
<!--                                <label class="form-label" for="form3Example1q">NAME</label>-->
<!--                            </div>-->
<!--                            <div class="form-outline mb-4">-->
<!--                                <input type="text" id="username" class="form-control" />-->
<!--                                <label class="form-label" for="form3Example1q">USERNAME</label>-->
<!--                            </div>-->
<!--                            <div class="form-outline mb-4">-->
<!--                                <input type="text" id="email" class="form-control" />-->
<!--                                <label class="form-label" for="form3Example1q">EMAIL</label>-->
<!--                            </div>-->
<!--                            <div class="form-outline mb-4">-->
<!--                                <input type="text" id="password" class="form-control" />-->
<!--                                <label class="form-label" for="form3Example1q">PASSWORD</label>-->
<!--                            </div>-->
<!--                            <div class="form-outline mb-4">-->
<!--                                <input type="text" id="form3Example1q" class="form-control" />-->
<!--                                <label class="form-label" for="form3Example1q">REPEAT YOUR PASSWORD</label>-->
<!--                            </div>-->

<!--                            <button type="submit" class="btn btn-success btn-lg mb-1">Submit</button>-->

<!--                        </form>-->

<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->

<!--<div id="header"></div>-->

<!--<a href="login.html">Login</a>-->

<!--<h1>Register</h1>-->

<!--<div>-->
<!--    <table>-->
<!--        <tr>-->
<!--            <td>Name</td>-->
<!--            <td><input type="text" id="name"></td>-->
<!--        </tr>-->
<!--        <tr>-->
<!--            <td>Username</td>-->
<!--            <td><input type="text" id="username"></td>-->
<!--        </tr>-->
<!--        <tr>-->
<!--            <td>Email</td>-->
<!--            <td><input type="email" id="email"></td>-->
<!--        </tr>-->
<!--        <tr>-->
<!--            <td>Password</td>-->
<!--            <td><input type="password" id="password"></td>-->
<!--        </tr>-->
<!--        <tr>-->
<!--            <td><span style="color:red;margin-right: 5px;display: none" id="pass-not-match">&Chi;</span>Repeat Password-->
<!--            </td>-->
<!--            <td><input type="password" id="repeat-pass"></td>-->
<!--        </tr>-->
<!--        <tr>-->
<!--            <td></td>-->
<!--            <td>-->
<!--                <button id="btn-register">Register</button>-->
<!--            </td>-->
<!--        </tr>-->
<!--    </table>-->
<!--</div>-->

<!--<div id="footer"></div>-->


<!--<script>-->
<!--    $(function () {-->
<!--        validatePassword();-->

<!--        $('#btn-register').click(function () {-->
<!--            let password = $('#password').val();-->
<!--            if (password === $('#repeat-pass').val()) {-->
<!--                let register = {-->
<!--                    name: $('#name').val(),-->
<!--                    username: $('#username').val(),-->
<!--                    email: $('#email').val(),-->
<!--                    password: password-->
<!--                }-->
<!--                $.ajax({-->
<!--                    url: 'http://localhost:8080/api/auth/signup',-->
<!--                    method: 'POST',-->
<!--                    contentType: 'application/json; charset=utf-8',-->
<!--                    data: JSON.stringify(register),-->
<!--                    success: function (response) {-->
<!--                        console.log("response === ", response)-->
<!--                    },-->
<!--                    error: function (error) {-->
<!--                        console.log("erorr === ", error)-->
<!--                    }-->
<!--                })-->
<!--            }-->
<!--        })-->

<!--    });-->

<!--    function validatePassword() {-->
<!--        let password = $('#password');-->
<!--        let repeat = $('#repeat-pass');-->
<!--        let blur = false;-->

<!--        let checkPassword = function () {-->
<!--            if (password.val().trim() !== '' && repeat.val().trim() !== '' && password.val() !== repeat.val()) {-->
<!--                $('#pass-not-match').show();-->
<!--                $('#btn-register').prop('disabled', true);-->
<!--            } else {-->
<!--                $('#pass-not-match').hide();-->
<!--                $('#btn-register').prop('disabled', false);-->
<!--            }-->
<!--        };-->

<!--        repeat.on('blur', function () {-->
<!--            checkPassword()-->
<!--            blur = true;-->
<!--        })-->

<!--        password.on('input', function () {-->
<!--            if (blur) {-->
<!--                checkPassword();-->
<!--            }-->
<!--        })-->

<!--        repeat.on('input', function () {-->
<!--            if (blur) {-->
<!--                checkPassword();-->
<!--            }-->
<!--        })-->
<!--    }-->

<!--</script>-->

</body>
</html>



